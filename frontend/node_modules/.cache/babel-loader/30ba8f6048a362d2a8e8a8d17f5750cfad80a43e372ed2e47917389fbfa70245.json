{"ast":null,"code":"// src/utils.js\nimport axios from 'axios';\nimport { jwtDecode } from \"jwt-decode\";\nexport const BASE_URL = \"http://localhost:5000\";\nexport const axiosJWT = axios.create();\naxiosJWT.interceptors.request.use(async config => {\n  let token = localStorage.getItem(\"token\");\n  if (token) {\n    const decoded = jwtDecode(token);\n    const currentDate = new Date();\n    if (decoded.exp * 1000 < currentDate.getTime()) {\n      const response = await axios.get(`${BASE_URL}/token`);\n      token = response.data.accessToken;\n      localStorage.setItem(\"token\", token);\n    }\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});","map":{"version":3,"names":["axios","jwtDecode","BASE_URL","axiosJWT","create","interceptors","request","use","config","token","localStorage","getItem","decoded","currentDate","Date","exp","getTime","response","get","data","accessToken","setItem","headers","Authorization","error","Promise","reject"],"sources":["D:/dokumenkuliah/TCC/tugas7/frontend/src/utils.js"],"sourcesContent":["// src/utils.js\r\nimport axios from 'axios';\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nexport const BASE_URL = \"http://localhost:5000\";\r\n\r\nexport const axiosJWT = axios.create();\r\n\r\naxiosJWT.interceptors.request.use(async (config) => {\r\n    let token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n        const decoded = jwtDecode(token);\r\n        const currentDate = new Date();\r\n        if (decoded.exp * 1000 < currentDate.getTime()) {\r\n            const response = await axios.get(`${BASE_URL}/token`);\r\n            token = response.data.accessToken;\r\n            localStorage.setItem(\"token\", token);\r\n        }\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n}, (error) => {\r\n    return Promise.reject(error);\r\n});\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,YAAY;AAEtC,OAAO,MAAMC,QAAQ,GAAG,uBAAuB;AAE/C,OAAO,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAM,CAAC,CAAC;AAEtCD,QAAQ,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,MAAOC,MAAM,IAAK;EAChD,IAAIC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACzC,IAAIF,KAAK,EAAE;IACP,MAAMG,OAAO,GAAGX,SAAS,CAACQ,KAAK,CAAC;IAChC,MAAMI,WAAW,GAAG,IAAIC,IAAI,CAAC,CAAC;IAC9B,IAAIF,OAAO,CAACG,GAAG,GAAG,IAAI,GAAGF,WAAW,CAACG,OAAO,CAAC,CAAC,EAAE;MAC5C,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,GAAGhB,QAAQ,QAAQ,CAAC;MACrDO,KAAK,GAAGQ,QAAQ,CAACE,IAAI,CAACC,WAAW;MACjCV,YAAY,CAACW,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;IACxC;IACAD,MAAM,CAACc,OAAO,CAACC,aAAa,GAAG,UAAUd,KAAK,EAAE;EACpD;EACA,OAAOD,MAAM;AACjB,CAAC,EAAGgB,KAAK,IAAK;EACV,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}